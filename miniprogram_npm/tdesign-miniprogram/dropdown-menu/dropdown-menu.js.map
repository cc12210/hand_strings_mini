{"version":3,"sources":["../../src/dropdown-menu/dropdown-menu.ts"],"names":[],"mappings":"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","file":"dropdown-menu.js","sourcesContent":["import { RelationsOptions, SuperComponent, wxComponent } from '../common/src/index';\nimport config from '../common/config';\nimport props from './props';\nimport type { TdDropdownMenuProps } from './type';\n\nconst { prefix } = config;\nconst name = `${prefix}-dropdown-menu`;\n\nexport interface DropdownMenuProps extends TdDropdownMenuProps {}\n\n@wxComponent()\nexport default class DropdownMenu extends SuperComponent {\n  externalClasses = [`${prefix}-class`, `${prefix}-class-item`, `${prefix}-class-label`, `${prefix}-class-icon`];\n\n  properties = props; // todo: zindex\n\n  nodes = null;\n\n  data = {\n    prefix,\n    classPrefix: name,\n    menus: null,\n    activeIdx: -1,\n    bottom: 0,\n  };\n\n  relations: RelationsOptions = {\n    '../dropdown-item/dropdown-item': {\n      type: 'child',\n    },\n  };\n\n  lifetimes = {\n    ready() {\n      this.getAllItems();\n    },\n  };\n\n  methods = {\n    toggle(index: number) {\n      const { activeIdx, duration } = this.data;\n      const prevItem = this.$children[activeIdx];\n      const currItem = this.$children[index];\n\n      if (currItem?.data.disabled) return;\n\n      if (activeIdx !== -1) {\n        prevItem.triggerEvent('close');\n        prevItem.setData(\n          {\n            show: false,\n          },\n          () => {\n            setTimeout(() => {\n              prevItem.triggerEvent('closed');\n            }, duration);\n          },\n        );\n      }\n\n      if (index == null || activeIdx === index) {\n        this.setData({\n          activeIdx: -1,\n        });\n      } else {\n        currItem.triggerEvent('open');\n        this.setData({\n          activeIdx: index,\n        });\n        currItem.setData(\n          {\n            show: true,\n          },\n          () => {\n            setTimeout(() => {\n              currItem.triggerEvent('opened');\n            }, duration);\n          },\n        );\n      }\n    },\n    getAllItems() {\n      const menus = this.$children.map(({ data }) => ({ label: data.label, disabled: data.disabled }));\n\n      this.setData({\n        menus,\n      });\n    },\n    handleToggle(e: WechatMiniprogram.BaseEvent) {\n      const { index } = e.currentTarget.dataset;\n\n      this.toggle(index);\n    },\n  };\n}\n"]}