{"version":3,"sources":["../../src/grid/grid.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,QAAQ,EAAE,cAAc,EAAE,WAAW,EAAoB,MAAM,qBAAqB,CAAC;AAC9F,OAAO,MAAM,MAAM,kBAAkB,CAAC;AACtC,OAAO,KAAK,MAAM,SAAS,CAAC;AAE5B,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAC;AAC1B,MAAM,IAAI,GAAG,GAAG,MAAM,OAAO,CAAC;AAG9B,IAAqB,IAAI,GAAzB,MAAqB,IAAK,SAAQ,cAAc;IAAhD;;QACE,oBAAe,GAAG,CAAC,SAAS,CAAC,CAAC;QAE9B,cAAS,GAAqB;YAC5B,wBAAwB,EAAE;gBACxB,IAAI,EAAE,YAAY;aACnB;SACF,CAAC;QAEF,eAAU,GAAG,KAAK,CAAC;QAEnB,SAAI,GAAG;YACL,MAAM;YACN,WAAW,EAAE,IAAI;YACjB,YAAY,EAAE,EAAE;SACjB,CAAC;QAEF,cAAS,GAAG;YACV,oBAAoB;gBAClB,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5B,CAAC;YACD,eAAe;gBACb,IAAI,CAAC,kBAAkB,EAAE,CAAC;gBAC1B,IAAI,CAAC,UAAU,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC;YAClD,CAAC;SACF,CAAC;QAEF,cAAS,GAAG;YACV,QAAQ;gBACN,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5B,CAAC;SACF,CAAC;QAEF,YAAO,GAAG;YACR,UAAU,CAAC,MAAmE;gBAC5E,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YACjC,CAAC;YACD,kBAAkB;gBAChB,MAAM,aAAa,GAAG,EAAE,CAAC;gBACzB,MAAM,WAAW,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBAC5C,WAAW,IAAI,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;gBAC/C,IAAI,CAAC,OAAO,CAAC;oBACX,YAAY,EAAE,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC;iBACtC,CAAC,CAAC;YACL,CAAC;YAED,qCAAqC;YACrC,gBAAgB;gBACd,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;gBACnC,IAAI,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC;gBAEjC,IAAI,CAAC,MAAM;oBAAE,OAAO,gBAAgB,MAAM,oBAAoB,MAAM,KAAK,CAAC;gBAC1E,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;oBAAE,MAAM,GAAG,EAAS,CAAC;gBAC1C,MAAM,EAAE,KAAK,GAAG,CAAC,EAAE,GAAG,MAAa,CAAC;gBACpC,OAAO,gBAAgB,KAAK,oBAAoB,KAAK,KAAK,CAAC;YAC7D,CAAC;SACF,CAAC;IACJ,CAAC;CAAA,CAAA;AAzDoB,IAAI;IADxB,WAAW,EAAE;GACO,IAAI,CAyDxB;eAzDoB,IAAI","file":"grid.js","sourcesContent":["import { isObject, SuperComponent, wxComponent, RelationsOptions } from '../common/src/index';\nimport config from '../common/config';\nimport props from './props';\n\nconst { prefix } = config;\nconst name = `${prefix}-grid`;\n\n@wxComponent()\nexport default class Grid extends SuperComponent {\n  externalClasses = ['t-class'];\n\n  relations: RelationsOptions = {\n    '../grid-item/grid-item': {\n      type: 'descendant',\n    },\n  };\n\n  properties = props;\n\n  data = {\n    prefix,\n    classPrefix: name,\n    contentStyle: '',\n  };\n\n  observers = {\n    'column,hover,align'() {\n      this.updateContentStyle();\n    },\n    'gutter,border'() {\n      this.updateContentStyle();\n      this.doForChild((child) => child.updateStyle());\n    },\n  };\n\n  lifetimes = {\n    attached() {\n      this.updateContentStyle();\n    },\n  };\n\n  methods = {\n    doForChild(action: (item: WechatMiniprogram.Component.TrivialInstance) => void) {\n      this.$children.forEach(action);\n    },\n    updateContentStyle() {\n      const contentStyles = [];\n      const marginStyle = this.getContentMargin();\n      marginStyle && contentStyles.push(marginStyle);\n      this.setData({\n        contentStyle: contentStyles.join(';'),\n      });\n    },\n\n    // 判断需不需要在content上加负margin以实现gutter间距\n    getContentMargin() {\n      const { gutter } = this.properties;\n      let { border } = this.properties;\n\n      if (!border) return `margin-left:-${gutter}rpx; margin-top:-${gutter}rpx`;\n      if (!isObject(border)) border = {} as any;\n      const { width = 2 } = border as any;\n      return `margin-left:-${width}rpx; margin-top:-${width}rpx`;\n    },\n  };\n}\n"]}