{"version":3,"sources":["../../src/avatar-group/avatar-group.ts"],"names":[],"mappings":"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","file":"avatar-group.js","sourcesContent":["import { SuperComponent, wxComponent, RelationsOptions } from '../common/src/index';\nimport config from '../common/config';\nimport avatarGroupProps from './props';\n\nconst { prefix } = config;\nconst name = `${prefix}-avatar-group`;\n\n@wxComponent()\nexport default class AvatarGroup extends SuperComponent {\n  externalClasses = [`${prefix}-class`, `${prefix}-class-content`, `${prefix}-class-image`];\n\n  properties = avatarGroupProps;\n\n  data = {\n    prefix,\n    classPrefix: name,\n    hasChild: true,\n    length: 0,\n    className: '',\n  };\n\n  options = {\n    multipleSlots: true,\n  };\n\n  relations: RelationsOptions = {\n    '../avatar/avatar': {\n      type: 'descendant',\n    },\n  };\n\n  lifetimes = {\n    attached() {\n      this.setClass();\n    },\n    ready() {\n      this.setData({\n        length: this.$children.length,\n      });\n      this.handleMax();\n      this.handleChildCascading();\n    },\n  };\n\n  observers = {\n    'cascading, size'() {\n      this.setClass();\n    },\n  };\n\n  methods = {\n    setClass() {\n      const { cascading, size } = this.properties;\n      const direction = cascading.split('-')[0];\n      const classList = [\n        name,\n        `${prefix}-class`,\n        `${name}-offset-${direction}-${size.indexOf('px') > -1 ? 'medium' : size}`,\n      ];\n\n      this.setData({\n        className: classList.join(' '),\n      });\n    },\n\n    handleMax() {\n      const { max } = this.data;\n      const len = this.$children.length;\n      if (!max || max > len) return;\n\n      const restAvatars = this.$children.splice(max, len - max);\n\n      restAvatars.forEach((child) => {\n        child.hide();\n      });\n    },\n\n    handleChildCascading() {\n      if (this.properties.cascading === 'right-up') return;\n\n      const defaultZIndex = 100;\n      this.$children.forEach((child, index) => {\n        child.updateCascading(defaultZIndex - index * 10);\n      });\n    },\n  };\n}\n"]}