{"version":3,"sources":["../../src/dialog/index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import props from './props';\nimport { getInstance } from '../common/utils';\n\ntype Context = WechatMiniprogram.Page.TrivialInstance | WechatMiniprogram.Component.TrivialInstance;\n\ninterface DialogAlertOptionsType {\n  context?: Context;\n  selector?: string;\n  title?: string;\n  content: string;\n  zIndex?: number;\n  asyncClose?: boolean;\n  confirmButtonText?: string;\n  textAlign?: string;\n  cancelBtn?: string | object;\n  confirmBtn?: string | object;\n}\n\ninterface DialogComfirmOptionsType extends DialogAlertOptionsType {\n  cancelButtonText?: string;\n}\n\ninterface Action {\n  name: string;\n  primary?: boolean;\n  style?: string;\n}\n\ninterface DialogActionOptionsType {\n  context?: Context;\n  selector?: string;\n  title?: string;\n  content: string;\n  zIndex?: number;\n  asyncClose?: boolean;\n  actions?: Action[]; // 自定义多选项，优先级高于默认的确定、取消按钮，触发后返回按钮的index\n  buttonLayout?: 'vertical' | 'horizontal'; // 多按钮排列方式，可选值：horizontal/vertical。\n}\n\nconst defaultOptions = {\n  actions: false,\n  buttonLayout: props.buttonLayout.value,\n  cancelBtn: props.cancelBtn.value,\n  closeOnOverlayClick: props.closeOnOverlayClick.value,\n  confirmBtn: props.confirmBtn.value,\n  content: '',\n  preventScrollThrough: props.preventScrollThrough.value,\n  showOverlay: props.showOverlay.value,\n  title: '',\n  visible: props.visible.value,\n};\n\nexport default {\n  alert(options: DialogAlertOptionsType) {\n    const { context, selector = '#t-dialog', ...otherOptions } = { ...defaultOptions, ...options };\n    const instance = getInstance(context, selector);\n    if (!instance) return Promise.reject();\n\n    return new Promise((resolve) => {\n      instance.setData({\n        cancelBtn: '',\n        ...otherOptions,\n        visible: true,\n      });\n      instance._onComfirm = resolve;\n    });\n  },\n  confirm(options: DialogComfirmOptionsType) {\n    const { context, selector = '#t-dialog', ...otherOptions } = { ...defaultOptions, ...options };\n    const instance = getInstance(context, selector);\n    if (!instance) return Promise.reject();\n\n    return new Promise((resolve, reject) => {\n      instance.setData({\n        ...otherOptions,\n        visible: true,\n      });\n      instance._onComfirm = resolve;\n      instance._onCancel = reject;\n    });\n  },\n  close(options: DialogComfirmOptionsType) {\n    const { context, selector = '#t-dialog' } = { ...options };\n    const instance = getInstance(context, selector);\n    if (instance) {\n      instance.close();\n      return Promise.resolve();\n    }\n    return Promise.reject();\n  },\n  action(options: DialogActionOptionsType): Promise<{ index: number }> {\n    const { context, selector = '#t-dialog', actions, ...otherOptions } = { ...defaultOptions, ...options };\n    const instance = getInstance(context, selector);\n    if (!instance) return Promise.reject();\n    if (!actions || (typeof actions === 'object' && (actions.length === 0 || actions.length > 7))) {\n      console.warn('action 数量建议控制在1至7个');\n    }\n\n    return new Promise((resolve) => {\n      instance.setData({\n        actions,\n        buttonLayout: 'vertical',\n        ...otherOptions,\n        visible: true,\n      });\n      instance._onAction = resolve;\n    });\n  },\n};\n"]}