{"version":3,"sources":["../../src/tabs/tabs.ts"],"names":[],"mappings":"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","file":"tabs.js","sourcesContent":["import { SuperComponent, wxComponent, RelationsOptions } from '../common/src/index';\nimport props from './props';\nimport config from '../common/config';\nimport touch from '../mixins/touch';\nimport { getRect, uniqueFactory } from '../common/utils';\nimport { TdTabsProps } from './type';\n\nconst { prefix } = config;\nconst name = `${prefix}-tabs`;\nconst getUniqueID = uniqueFactory('tabs');\n\nexport interface TabsProps extends TdTabsProps {}\n\n@wxComponent()\nexport default class Tabs extends SuperComponent {\n  behaviors = [touch];\n\n  externalClasses = [`${prefix}-class`, `${prefix}-class-item`, `${prefix}-class-active`, `${prefix}-class-track`];\n\n  relations: RelationsOptions = {\n    '../tab-panel/tab-panel': {\n      type: 'descendant',\n      linked(target: any) {\n        this.children.push(target);\n        this.initChildId();\n        target.index = this.children.length - 1;\n        this.updateTabs();\n      },\n      unlinked(target: WechatMiniprogram.Component.TrivialInstance) {\n        this.children = this.children.filter((item) => item.index !== target.index);\n        this.updateTabs(() => this.setTrack());\n        this.initChildId();\n      },\n    },\n  };\n\n  properties = props;\n\n  controlledProps = [\n    {\n      key: 'value',\n      event: 'change',\n    },\n  ];\n\n  observers = {\n    value(name) {\n      if (name !== this.getCurrentName()) {\n        this.setCurrentIndexByName(name);\n      }\n    },\n  };\n\n  data = {\n    prefix,\n    classPrefix: name,\n    tabs: [],\n    currentIndex: -1,\n    trackStyle: '',\n    isScrollX: true,\n    direction: 'X',\n    offset: 0,\n    tabID: '',\n    placement: 'top',\n  };\n\n  lifetimes = {\n    created() {\n      this.children = this.children || [];\n    },\n\n    attached() {\n      wx.nextTick(() => {\n        this.setTrack();\n      });\n      getRect(this, `.${name}`).then((rect) => {\n        this.containerWidth = rect.width;\n      });\n      this.setData({\n        tabID: getUniqueID(),\n      });\n    },\n  };\n\n  initChildId() {\n    this.children.forEach((item, index) => {\n      item.setId(`${this.data.tabID}_panel_${index}`);\n    });\n  }\n\n  methods = {\n    updateTabs(cb) {\n      const { children } = this;\n      const tabs = children.map((child: any) => child.data);\n\n      tabs.forEach((item) => {\n        if (typeof item.icon === 'string') {\n          item.icon = { name: item.icon };\n        }\n      });\n\n      this.setData({ tabs }, cb);\n      this.setCurrentIndexByName(this.properties.value);\n    },\n\n    setCurrentIndexByName(name) {\n      const { children } = this;\n      const index = children.findIndex((child: any) => child.getComputedName() === `${name}`);\n      if (index > -1) {\n        this.setCurrentIndex(index);\n      }\n    },\n\n    setCurrentIndex(index: number) {\n      if (index <= -1 || index >= this.children.length) return;\n      this.children.forEach((child: any, idx: number) => {\n        const isActive = index === idx;\n        if (isActive !== child.data.active) {\n          child.render(isActive, this);\n        }\n      });\n      if (this.data.currentIndex === index) return;\n      this.setData({\n        currentIndex: index,\n      });\n      this.setTrack();\n    },\n\n    getCurrentName() {\n      if (this.children) {\n        const activeTab = this.children[this.data.currentIndex];\n        if (activeTab) {\n          return activeTab.getComputedName();\n        }\n      }\n    },\n\n    calcScrollOffset(containerWidth: number, targetLeft: number, targetWidth: number, offset: number) {\n      return offset + targetLeft - (1 / 2) * containerWidth + targetWidth / 2;\n    },\n\n    getTrackSize() {\n      return new Promise<number>((resolve) => {\n        if (this.trackWidth) {\n          resolve(this.trackWidth);\n          return;\n        }\n        getRect(this, `.${prefix}-tabs__track`).then((res) => {\n          if (res) {\n            this.trackWidth = res.width;\n            resolve(this.trackWidth);\n          }\n        });\n      });\n    },\n\n    async setTrack() {\n      if (!this.properties.showBottomLine) return;\n      const { children } = this;\n      if (!children) return;\n      const { currentIndex, isScrollX, direction } = this.data;\n      if (currentIndex <= -1) return;\n\n      try {\n        const res = await getRect(this, `.${prefix}-tabs__item`, true);\n        const rect = res[currentIndex];\n        if (!rect) return;\n        let count = 0;\n        let distance = 0;\n        let totalSize = 0;\n\n        res.forEach((item) => {\n          if (count < currentIndex) {\n            distance += isScrollX ? item.width : item.height;\n            count += 1;\n          }\n          totalSize += isScrollX ? item.width : item.height;\n        });\n\n        if (this.containerWidth) {\n          const offset = this.calcScrollOffset(this.containerWidth, rect.left, rect.width, this.data.offset);\n          const maxOffset = totalSize - this.containerWidth;\n          this.setData({\n            offset: Math.min(Math.max(offset, 0), maxOffset),\n          });\n        }\n\n        if (isScrollX) {\n          const trackLineWidth = await this.getTrackSize();\n          distance += (rect.width - trackLineWidth) / 2;\n        }\n        let trackStyle = `-webkit-transform: translate${direction}(${distance}px);\n          transform: translate${direction}(${distance}px);\n        `;\n        if (!isScrollX) {\n          trackStyle += `height: ${rect.height}px;`;\n        }\n        this.setData({\n          trackStyle,\n        });\n      } catch (err) {\n        this.triggerEvent('error', err);\n      }\n    },\n\n    onTabTap(event: any) {\n      const { index } = event.currentTarget.dataset;\n\n      this.changeIndex(index);\n    },\n\n    onTouchStart(event: any) {\n      if (!this.properties.swipeable) return;\n\n      this.touchStart(event);\n    },\n\n    onTouchMove(event: any) {\n      if (!this.properties.swipeable) return;\n\n      this.touchMove(event);\n    },\n\n    onTouchEnd() {\n      if (!this.properties.swipeable) return;\n\n      const { direction, deltaX, offsetX } = this;\n      const minSwipeDistance = 50;\n      if (direction === 'horizontal' && offsetX >= minSwipeDistance) {\n        const index = this.getAvailableTabIndex(deltaX);\n        if (index !== -1) {\n          this.changeIndex(index);\n        }\n      }\n    },\n\n    onTouchScroll(event: WechatMiniprogram.CustomEvent) {\n      this._trigger('scroll', event.detail);\n    },\n\n    changeIndex(index) {\n      const currentTab = this.data.tabs[index];\n      const { value, label } = currentTab;\n      if (!currentTab?.disabled && index !== this.data.currentIndex) {\n        this._trigger('change', { value, label });\n      }\n      this._trigger('click', { value, label });\n    },\n\n    getAvailableTabIndex(deltaX: number) {\n      const step = deltaX > 0 ? -1 : 1;\n      const { currentIndex, tabs } = this.data;\n      const len = tabs.length;\n      for (let i = step; currentIndex + step >= 0 && currentIndex + step < len; i += step) {\n        const newIndex = currentIndex + i;\n        if (newIndex >= 0 && newIndex < len && tabs[newIndex] && !tabs[newIndex].disabled) {\n          return newIndex;\n        }\n      }\n      return -1;\n    },\n  };\n}\n"]}