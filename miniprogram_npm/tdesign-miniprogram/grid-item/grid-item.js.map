{"version":3,"sources":["../../src/grid-item/grid-item.ts"],"names":[],"mappings":"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","file":"grid-item.js","sourcesContent":["import { SuperComponent, wxComponent, isObject, RelationsOptions } from '../common/src/index';\nimport config from '../common/config';\nimport props from './props';\nimport { uniqueFactory, setIcon } from '../common/utils';\n\nconst { prefix } = config;\nconst name = `${prefix}-grid-item`;\nconst getUniqueID = uniqueFactory('grid_item');\n\nenum LinkTypes {\n  'redirect-to' = 'redirectTo',\n  'switch-tab' = 'switchTab',\n  'relaunch' = 'reLaunch',\n  'navigate-to' = 'navigateTo',\n}\n\n@wxComponent()\nexport default class GridItem extends SuperComponent {\n  externalClasses = [\n    `${prefix}-class`,\n    `${prefix}-class-content`,\n    `${prefix}-class-image`,\n    `${prefix}-class-text`,\n    `${prefix}-class-description`,\n  ];\n\n  options = {\n    multipleSlots: true,\n    // virtualHost: true,\n  };\n\n  relations: RelationsOptions = {\n    '../grid/grid': {\n      type: 'ancestor',\n      linked(target) {\n        this.parent = target;\n        this.updateStyle();\n        this.setData({\n          column: target.data.column,\n        });\n      },\n    },\n  };\n\n  properties = props;\n\n  data = {\n    prefix,\n    classPrefix: name,\n    gridItemStyle: '',\n    gridItemWrapperStyle: '',\n    gridItemContentStyle: '',\n    align: 'center',\n    column: 0,\n    labelID: '',\n  };\n\n  observers = {\n    icon(icon) {\n      const obj = setIcon('icon', icon, '');\n      this.setData({\n        ...obj,\n      });\n    },\n  };\n\n  lifetimes = {\n    ready() {\n      this.setData({\n        labelID: getUniqueID(),\n      });\n    },\n  };\n\n  updateStyle() {\n    const { hover, align } = this.parent.properties;\n    const gridItemStyles = [];\n    const gridItemWrapperStyles = [];\n    const gridItemContentStyles = [];\n    const widthStyle = this.getWidthStyle();\n    const paddingStyle = this.getPaddingStyle();\n    const borderStyle = this.getBorderStyle();\n    widthStyle && gridItemStyles.push(widthStyle);\n    paddingStyle && gridItemWrapperStyles.push(paddingStyle);\n    borderStyle && gridItemContentStyles.push(borderStyle);\n    this.setData({\n      gridItemStyle: `${gridItemStyles.join(';')}`,\n      gridItemWrapperStyle: gridItemWrapperStyles.join(';'),\n      gridItemContentStyle: gridItemContentStyles.join(';'),\n      hover,\n      layout: this.properties.layout,\n      align: align,\n    });\n  }\n\n  // 判断应该加在gridItem上的宽度\n  getWidthStyle() {\n    const { column } = this.parent.properties;\n    return column > 0 ? `width:${(1 / column) * 100}%` : '';\n  }\n\n  // 获取应该加在gridWrap上的padding\n  getPaddingStyle() {\n    const { gutter } = this.parent.properties;\n    if (gutter) return `padding-left:${gutter}rpx;padding-top:${gutter}rpx`;\n    return '';\n  }\n\n  // 判断border在grid-item-content上的css属性\n  getBorderStyle() {\n    const { gutter } = this.parent.properties;\n    let { border } = this.parent.properties;\n    if (!border) return ''; // 如果border的值没传或者是border的值为false\n    if (!isObject(border)) border = {} as any;\n    const { color = '#266FE8', width = 2, style = 'solid' } = border as any;\n    if (gutter) return `border:${width}rpx ${style} ${color}`;\n    return `border-top:${width}rpx ${style} ${color};border-left:${width}rpx ${style} ${color}`;\n  }\n\n  onClick(e) {\n    const { item } = e.currentTarget.dataset;\n    this.triggerEvent('click', item);\n    this.jumpLink();\n  }\n\n  jumpLink() {\n    const { url, jumpType } = this.properties;\n    if (url && jumpType) {\n      if (LinkTypes[jumpType as any]) {\n        wx[LinkTypes[jumpType as any]]({ url });\n      }\n    }\n  }\n}\n"]}