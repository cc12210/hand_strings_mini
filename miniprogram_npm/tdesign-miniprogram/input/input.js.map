{"version":3,"sources":["../../src/input/input.ts"],"names":[],"mappings":"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","file":"input.js","sourcesContent":["import { SuperComponent, wxComponent } from '../common/src/index';\nimport config from '../common/config';\nimport props from './props';\nimport { getCharacterLength, calcIcon } from '../common/utils';\n\nconst { prefix } = config;\nconst name = `${prefix}-input`;\n\n@wxComponent()\nexport default class Input extends SuperComponent {\n  options = {\n    multipleSlots: true,\n  };\n\n  externalClasses = [\n    'class',\n    `${prefix}-class`,\n    `${prefix}-class-prefix-icon`,\n    `${prefix}-class-label`,\n    `${prefix}-class-input`,\n    `${prefix}-class-clearable`,\n    `${prefix}-class-suffix`,\n    `${prefix}-class-suffix-icon`,\n    `${prefix}-class-tips`,\n  ];\n\n  behaviors = ['wx://form-field'];\n\n  properties = props;\n\n  data = {\n    prefix,\n    classPrefix: name,\n    classBasePrefix: prefix,\n  };\n\n  lifetimes = {\n    ready() {\n      const { value } = this.properties;\n      this.updateValue(value);\n    },\n  };\n\n  observers = {\n    prefixIcon(v) {\n      this.setData({\n        _prefixIcon: calcIcon(v),\n      });\n    },\n\n    suffixIcon(v) {\n      this.setData({\n        _suffixIcon: calcIcon(v),\n      });\n    },\n\n    clearable(v) {\n      this.setData({\n        _clearIcon: calcIcon(v, 'close-circle-filled'),\n      });\n    },\n  };\n\n  methods = {\n    updateValue(value) {\n      const { maxcharacter, maxlength } = this.properties;\n      if (maxcharacter && maxcharacter > 0 && !Number.isNaN(maxcharacter)) {\n        const { length, characters } = getCharacterLength('maxcharacter', value, maxcharacter);\n        this.setData({\n          value: characters,\n          count: length,\n        });\n      } else if (maxlength > 0 && !Number.isNaN(maxlength)) {\n        const { length, characters } = getCharacterLength('maxlength', value, maxlength);\n        this.setData({\n          value: characters,\n          count: length,\n        });\n      } else {\n        this.setData({\n          value,\n          count: value ? String(value).length : 0,\n        });\n      }\n    },\n    onInput(e) {\n      const { value, cursor, keyCode } = e.detail;\n      this.updateValue(value);\n      this.triggerEvent('change', { value: this.data.value, cursor, keyCode });\n    },\n    onFocus(e) {\n      this.triggerEvent('focus', e.detail);\n    },\n    onBlur(e) {\n      this.triggerEvent('blur', e.detail);\n    },\n    onConfirm(e) {\n      this.triggerEvent('enter', e.detail);\n    },\n    onSuffixClick() {\n      this.triggerEvent('click', { trigger: 'suffix' });\n    },\n    onSuffixIconClick() {\n      this.triggerEvent('click', { trigger: 'suffix-icon' });\n    },\n    clearInput(e) {\n      this.triggerEvent('clear', e.detail);\n      this.setData({ value: '' });\n    },\n    onKeyboardHeightChange(e) {\n      this.triggerEvent('keyboardheightchange', e.detail);\n    },\n  };\n}\n"]}