{"version":3,"sources":["../../src/swiper/swiper.ts"],"names":[],"mappings":"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","file":"swiper.js","sourcesContent":["import { SuperComponent, wxComponent, RelationsOptions } from '../common/src/index';\nimport config from '../common/config';\nimport props from './props';\n\nconst { prefix } = config;\nconst name = `${prefix}-swiper`;\n\n@wxComponent()\nexport default class Swiper extends SuperComponent {\n  externalClasses = [\n    `${prefix}-class`,\n    `${prefix}-class-nav`,\n    `${prefix}-class-image`,\n    `${prefix}-class-prev-image`,\n    `${prefix}-class-next-image`,\n  ];\n\n  options = {\n    multipleSlots: true,\n  };\n\n  properties = props;\n\n  observers = {\n    navCurrent(v) {\n      this.updateNav(v);\n    },\n  };\n\n  $nav = null;\n\n  relations: RelationsOptions = {\n    '../swiper-nav/swiper-nav': {\n      type: 'child',\n    },\n  };\n\n  data = {\n    prefix,\n    classPrefix: name,\n  };\n\n  lifetimes = {\n    ready() {\n      const { current } = this.properties;\n      this.setData({ navCurrent: current });\n    },\n  };\n\n  methods = {\n    updateNav(currentValue) {\n      if (this.data.navigation) return;\n      const $nav = this.getRelationNodes('./swiper-nav')?.[0];\n      if (!$nav) return;\n      const { direction, paginationPosition, list } = this.properties;\n\n      $nav.setData({\n        current: currentValue,\n        total: list.length,\n        direction,\n        paginationPosition,\n      });\n    },\n\n    onTap(e) {\n      const { index } = e.currentTarget.dataset;\n\n      this.triggerEvent('click', { index });\n    },\n\n    onChange(e) {\n      const { current, source } = e.detail;\n\n      this.setData({\n        navCurrent: current,\n      });\n\n      this.triggerEvent('change', { current, source });\n    },\n\n    onNavBtnChange(e) {\n      const { dir, source } = e.detail;\n\n      this.doNavBtnChange(dir, source);\n    },\n\n    doNavBtnChange(dir, source) {\n      const { current, list, loop } = this.data;\n      const count = list.length;\n      let nextPos = dir === 'next' ? current + 1 : current - 1;\n\n      if (loop) {\n        nextPos = dir === 'next' ? (current + 1) % count : (current - 1 + count) % count;\n      } else {\n        nextPos = nextPos < 0 || nextPos >= count ? current : nextPos;\n      }\n\n      if (nextPos === current) return;\n\n      this.setData({\n        current: nextPos,\n      });\n      this.triggerEvent('change', { current: nextPos, source });\n    },\n  };\n}\n"]}