{"version":3,"sources":["../../src/skeleton/skeleton.ts"],"names":[],"mappings":"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","file":"skeleton.js","sourcesContent":["import { SuperComponent, wxComponent } from '../common/src/index';\nimport config from '../common/config';\nimport props from './props';\nimport { SkeletonRowColObj } from './type';\nimport { ClassName, Styles } from '../common/common';\nimport { isNumber, classNames } from '../common/utils';\n\nconst { prefix } = config;\nconst name = `${prefix}-skeleton`;\n\nconst ThemeMap = {\n  avatar: [{ type: 'circle', size: '96rpx' }],\n  image: [{ type: 'rect', size: '144rpx' }],\n  text: [\n    [\n      { width: '24%', height: '32rpx', marginRight: '32rpx' },\n      { width: '76%', height: '32rpx' },\n    ],\n    1,\n  ],\n  paragraph: [1, 1, 1, { width: '55%' }],\n};\n\n@wxComponent()\nexport default class Skeleton extends SuperComponent {\n  externalClasses = [`${prefix}-class`, `${prefix}-class-col`, `${prefix}-class-row`];\n\n  properties = props;\n\n  data = {\n    prefix,\n    classPrefix: name,\n    parsedRowcols: [],\n  };\n\n  observers = {\n    rowCol() {\n      this.init();\n    },\n  };\n\n  lifetimes = {\n    attached() {\n      this.init();\n    },\n  };\n\n  methods = {\n    init() {\n      const { theme, rowCol } = this.properties;\n      const rowCols = [];\n      if (rowCol.length) {\n        rowCols.push(...rowCol);\n      } else {\n        rowCols.push(...ThemeMap[theme || 'text']);\n      }\n\n      const parsedRowcols = rowCols.map((item) => {\n        if (isNumber(item)) {\n          return [\n            {\n              class: this.getColItemClass({ type: 'text' }),\n              style: {},\n            },\n          ];\n        }\n        if (Array.isArray(item)) {\n          return item.map((col) => {\n            return {\n              ...col,\n              class: this.getColItemClass(col),\n              style: this.getColItemStyle(col),\n            };\n          });\n        }\n\n        const nItem = item as SkeletonRowColObj;\n        return [\n          {\n            ...nItem,\n            class: this.getColItemClass(nItem),\n            style: this.getColItemStyle(nItem),\n          },\n        ];\n      });\n\n      this.setData({\n        parsedRowcols,\n      });\n    },\n    getColItemClass(obj: SkeletonRowColObj): ClassName {\n      return classNames([\n        `${name}__col`,\n        `${name}--type-${obj.type || 'text'}`,\n        `${name}--animation-${this.properties.animation}`,\n      ]);\n    },\n\n    getColItemStyle(obj: SkeletonRowColObj): Styles {\n      const styleName = [\n        'width',\n        'height',\n        'marginRight',\n        'marginLeft',\n        'margin',\n        'size',\n        'background',\n        'backgroundColor',\n        'borderRadius',\n      ];\n      const style: Styles = {};\n      styleName.forEach((name) => {\n        if (name in obj) {\n          const px = isNumber(obj[name]) ? `${obj[name]}px` : obj[name];\n          if (name === 'size') {\n            [style.width, style.height] = [px, px];\n          } else {\n            style[name] = px;\n          }\n        }\n      });\n      return style;\n    },\n  };\n}\n"]}