{"version":3,"sources":["../../src/radio-group/radio-group.ts"],"names":[],"mappings":"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","file":"radio-group.js","sourcesContent":["import config from '../common/config';\nimport { SuperComponent, wxComponent, RelationsOptions } from '../common/src/index';\nimport props from './props';\n\nconst { prefix } = config;\nconst name = `${prefix}-radio-group`;\n\n@wxComponent()\nexport default class RadioGroup extends SuperComponent {\n  externalClasses = ['class', `${prefix}-class`];\n\n  data = {\n    prefix,\n    classPrefix: name,\n    radioOptions: [],\n  };\n\n  relations: RelationsOptions = {\n    '../radio/radio': {\n      type: 'descendant',\n      linked(target) {\n        const { value, disabled } = this.data;\n        target.setData({\n          checked: value === target.data.value,\n        });\n        target.setDisabled(disabled);\n      },\n    },\n  };\n\n  properties = props;\n\n  controlledProps = [\n    {\n      key: 'value',\n      event: 'change',\n    },\n  ];\n\n  observers = {\n    value(v) {\n      this.getChilds().forEach((item) => {\n        item.setData({\n          checked: v === item.data.value,\n        });\n      });\n    },\n    options() {\n      this.initWithOptions();\n    },\n  };\n\n  methods = {\n    getChilds() {\n      let items = this.$children;\n\n      if (!items?.length) {\n        items = this.selectAllComponents(`.${prefix}-radio-option`);\n      }\n      return items;\n    },\n\n    updateValue(value) {\n      this._trigger('change', { value });\n    },\n\n    handleRadioChange(e) {\n      const { value, index } = e.target.dataset;\n\n      this._trigger('change', { value, index });\n    },\n\n    // 支持自定义options\n    initWithOptions() {\n      const { options, value, keys } = this.data;\n      // 数字数组｜字符串数组｜对像数组\n      if (!options?.length || !Array.isArray(options)) {\n        this.setData({\n          radioOptions: [],\n        });\n        return;\n      }\n      const optionsValue = [];\n      try {\n        options.forEach((element) => {\n          const typeName = typeof element;\n          if (typeName === 'number' || typeName === 'string') {\n            optionsValue.push({\n              label: `${element}`,\n              value: element,\n              checked: value === element,\n            });\n          } else if (typeName === 'object') {\n            optionsValue.push({\n              ...element,\n              label: element[keys?.label ?? 'label'],\n              value: element[keys?.value ?? 'value'],\n              checked: value === element[keys?.value ?? 'value'],\n            });\n          }\n        });\n        this.setData({\n          radioOptions: optionsValue,\n        });\n      } catch (error) {\n        console.error('error', error);\n      }\n    },\n  };\n}\n"]}