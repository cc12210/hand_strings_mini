{"version":3,"sources":["../../src/tab-bar-item/tab-bar-item.ts"],"names":[],"mappings":"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","file":"tab-bar-item.js","sourcesContent":["import { wxComponent, SuperComponent, RelationsOptions } from '../common/src/index';\nimport config from '../common/config';\nimport props from './props';\nimport { getRect, calcIcon } from '../common/utils';\n\nconst { prefix } = config;\nconst classPrefix = `${prefix}-tab-bar-item`;\n\n@wxComponent()\nexport default class TabBarItem extends SuperComponent {\n  parent = null;\n\n  relations: RelationsOptions = {\n    '../tab-bar/tab-bar': {\n      type: 'ancestor',\n      linked(parent) {\n        const { theme, split, shape } = parent.data;\n\n        this.setData({\n          theme,\n          split,\n          shape,\n          currentName: this.properties.value ? this.properties.value : parent.initName(),\n        });\n        parent.updateChildren();\n      },\n    },\n  };\n\n  options = {\n    multipleSlots: true,\n  };\n\n  data = {\n    prefix,\n    classPrefix,\n    isSpread: false,\n    isChecked: false,\n    hasChildren: false,\n    currentName: '',\n    split: true,\n    iconOnly: false,\n    theme: '',\n    crowded: false,\n    shape: 'normal',\n  };\n\n  properties = props;\n\n  observers = {\n    subTabBar(value: Record<string, any>[]) {\n      this.setData({\n        hasChildren: value.length > 0,\n      });\n    },\n    icon(v) {\n      this.setData({\n        _icon: calcIcon(v),\n      });\n    },\n  };\n\n  lifetimes = {\n    async attached() {\n      const res = await getRect(this, `.${classPrefix}__text`);\n\n      this.setData({ iconOnly: res.height === 0 });\n    },\n  };\n\n  methods = {\n    showSpread() {\n      this.setData({\n        isSpread: true,\n      });\n    },\n    toggle() {\n      const { currentName, hasChildren, isSpread } = this.data;\n\n      if (hasChildren) {\n        this.setData({\n          isSpread: !isSpread,\n        });\n      }\n      this.$parent.updateValue(currentName);\n      this.$parent.changeOtherSpread(currentName);\n    },\n    selectChild(event) {\n      const { value } = event.target.dataset;\n\n      this.$parent.updateValue(value);\n      this.setData({\n        isSpread: false,\n      });\n    },\n    checkActive(value) {\n      const { currentName, subTabBar } = this.data;\n      const isChecked = subTabBar?.some((item) => item.value === value) || currentName === value;\n\n      this.setData({\n        isChecked,\n      });\n    },\n    closeSpread() {\n      this.setData({\n        isSpread: false,\n      });\n    },\n  };\n}\n"]}