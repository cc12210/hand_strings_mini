{"version":3,"sources":["../../src/swipe-cell/swipe-cell.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,cAAc,EAAE,WAAW,EAAE,MAAM,qBAAqB,CAAC;AAClE,OAAO,MAAM,MAAM,kBAAkB,CAAC;AACtC,OAAO,KAAK,MAAM,SAAS,CAAC;AAC5B,OAAO,EAAE,OAAO,EAAE,MAAM,iBAAiB,CAAC;AAE1C,IAAI,KAAK,GAAkD,EAAE,CAAC;AAE9D,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAC;AAC1B,MAAM,IAAI,GAAG,GAAG,MAAM,aAAa,CAAC;AACpC,MAAM,cAAc,GAAG,IAAI,IAAI,EAAE,CAAC;AAGlC,IAAqB,UAAU,GAA/B,MAAqB,UAAW,SAAQ,cAAc;IAAtD;;QACE,oBAAe,GAAG,CAAC,GAAG,MAAM,QAAQ,CAAC,CAAC;QAEtC,YAAO,GAAG;YACR,aAAa,EAAE,IAAI;SACpB,CAAC;QAEF,eAAU,GAAG,KAAK,CAAC;QAEnB,SAAI,GAAG;YACL,MAAM;YACN,YAAY,EAAE,EAAE;YAChB,MAAM,EAAE,IAAI;YACZ,WAAW,EAAE,IAAI;SAClB,CAAC;IAiDJ,CAAC;IA/CC,QAAQ;QACN,KAAK,CAAC,IAAI,CAAC,IAAmD,CAAC,CAAC;IAClE,CAAC;IAED,KAAK;QACH,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,aAAa;QACX,OAAO,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,cAAc,QAAQ,CAAC,EAAE,OAAO,CAAC,IAAI,EAAE,GAAG,cAAc,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CACrG,CAAC,CAAC,QAAQ,EAAE,SAAS,CAAC,EAAE,EAAE;YACxB,IAAI,CAAC,OAAO,CAAC;gBACX,SAAS,EAAE,QAAQ,CAAC,KAAK;gBACzB,UAAU,EAAE,SAAS,CAAC,KAAK;aAC5B,CAAC,CAAC;QACL,CAAC,CACF,CAAC;IACJ,CAAC;IAED,QAAQ;QACN,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;IAChD,CAAC;IAED,IAAI;QACF,IAAI,CAAC,OAAO,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;IACjC,CAAC;IAED,KAAK;QACH,IAAI,CAAC,OAAO,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC;IAClC,CAAC;IAED,UAAU;QACR,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;IACxE,CAAC;IAED,KAAK;QACH,IAAI,CAAC,KAAK,EAAE,CAAC;IACf,CAAC;IAED,WAAW,CAAC,KAAK;QACf,MAAM,EACJ,aAAa,EAAE,EACb,OAAO,EAAE,EAAE,MAAM,EAAE,GACpB,GACF,GAAG,KAAK,CAAC;QACV,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IACrC,CAAC;CACF,CAAA;AA/DoB,UAAU;IAD9B,WAAW,EAAE;GACO,UAAU,CA+D9B;eA/DoB,UAAU","file":"swipe-cell.js","sourcesContent":["import { SuperComponent, wxComponent } from '../common/src/index';\nimport config from '../common/config';\nimport props from './props';\nimport { getRect } from '../common/utils';\n\nlet ARRAY: WechatMiniprogram.Component.TrivialInstance[] = [];\n\nconst { prefix } = config;\nconst name = `${prefix}-swipe-cell`;\nconst ContainerClass = `.${name}`;\n\n@wxComponent()\nexport default class SwiperCell extends SuperComponent {\n  externalClasses = [`${prefix}-class`];\n\n  options = {\n    multipleSlots: true,\n  };\n\n  properties = props;\n\n  data = {\n    prefix,\n    wrapperStyle: '',\n    closed: true,\n    classPrefix: name,\n  };\n\n  attached() {\n    ARRAY.push(this as WechatMiniprogram.Component.TrivialInstance);\n  }\n\n  ready() {\n    this.setSwipeWidth();\n  }\n\n  setSwipeWidth() {\n    Promise.all([getRect(this, `${ContainerClass}__left`), getRect(this, `${ContainerClass}__right`)]).then(\n      ([leftRect, rightRect]) => {\n        this.setData({\n          leftWidth: leftRect.width,\n          rightWidth: rightRect.width,\n        });\n      },\n    );\n  }\n\n  detached() {\n    ARRAY = ARRAY.filter((item) => item !== this);\n  }\n\n  open() {\n    this.setData({ opened: true });\n  }\n\n  close() {\n    this.setData({ opened: false });\n  }\n\n  closeOther() {\n    ARRAY.filter((item) => item !== this).forEach((item) => item.close());\n  }\n\n  onTap() {\n    this.close();\n  }\n\n  onActionTap(event) {\n    const {\n      currentTarget: {\n        dataset: { action },\n      },\n    } = event;\n    this.triggerEvent('click', action);\n  }\n}\n"]}