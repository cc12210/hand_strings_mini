{"version":3,"sources":["../../src/toast/toast.ts"],"names":[],"mappings":"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","file":"toast.js","sourcesContent":["import { SuperComponent, wxComponent } from '../common/src/index';\nimport config from '../common/config';\nimport props from './props';\nimport { ToastOptionsType } from './index';\nimport transition from '../mixins/transition';\nimport { calcIcon } from '../common/utils';\n\nconst { prefix } = config;\nconst name = `${prefix}-toast`;\n\ntype Timer = NodeJS.Timeout | null;\n\n@wxComponent()\nexport default class Toast extends SuperComponent {\n  externalClasses = [`${prefix}-class`];\n\n  options = {\n    multipleSlots: true,\n  };\n\n  behaviors = [transition()];\n\n  hideTimer: Timer = null;\n\n  data = {\n    prefix,\n    classPrefix: name,\n    typeMapIcon: '',\n  };\n\n  properties = props;\n\n  detached() {\n    this.destroyed();\n  }\n\n  methods = {\n    show(options: ToastOptionsType) {\n      if (this.hideTimer) clearTimeout(this.hideTimer);\n      const iconMap = {\n        loading: 'loading',\n        success: 'check-circle',\n        warning: 'error-circle',\n        fail: 'close-circle',\n      };\n      const typeMapIcon = iconMap[options?.theme];\n      const defaultOptions = {\n        direction: props.direction.value,\n        duration: props.duration.value,\n        icon: props.icon.value,\n        message: props.message.value,\n        placement: props.placement.value,\n        preventScrollThrough: props.preventScrollThrough.value,\n        theme: props.theme.value,\n      };\n\n      const data = {\n        ...defaultOptions,\n        ...options,\n        visible: true,\n        isLoading: options?.theme === 'loading',\n        _icon: calcIcon(typeMapIcon ?? options.icon),\n      };\n      const { duration } = data;\n      this.setData(data);\n\n      if (duration > 0) {\n        this.hideTimer = setTimeout(() => {\n          this.hide();\n        }, duration);\n      }\n    },\n\n    hide() {\n      this.setData({ visible: false });\n      this.data?.close?.();\n      this.triggerEvent('close');\n    },\n\n    destroyed() {\n      if (this.hideTimer) {\n        clearTimeout(this.hideTimer);\n        this.hideTimer = null;\n      }\n      this.triggerEvent('destory');\n    },\n\n    loop() {},\n  };\n}\n"]}