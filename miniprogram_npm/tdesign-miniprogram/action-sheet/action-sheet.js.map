{"version":3,"sources":["../../src/action-sheet/action-sheet.ts"],"names":[],"mappings":"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","file":"action-sheet.js","sourcesContent":["import { chunk } from '../common/utils';\nimport { SuperComponent, wxComponent } from '../common/src/index';\nimport config from '../common/config';\nimport { ActionSheetTheme, show } from './show';\nimport props from './props';\n\nconst { prefix } = config;\nconst name = `${prefix}-action-sheet`;\n\n@wxComponent()\nexport default class ActionSheet extends SuperComponent {\n  static show = show;\n\n  externalClasses = [`${prefix}-class`, `${prefix}-class-content`, `${prefix}-class-cancel`];\n\n  properties = {\n    ...props,\n  };\n\n  data = {\n    prefix,\n    classPrefix: name,\n    gridThemeItems: [],\n    currentSwiperIndex: 0,\n  };\n\n  controlledProps = [\n    {\n      key: 'visible',\n      event: 'visible-change',\n    },\n  ];\n\n  ready() {\n    this.memoInitialData();\n    this.splitGridThemeActions();\n  }\n\n  methods = {\n    onSwiperChange(e: WechatMiniprogram.TouchEvent) {\n      const {\n        detail: { current },\n      } = e;\n      this.setData({\n        currentSwiperIndex: current,\n      });\n    },\n\n    splitGridThemeActions() {\n      if (this.data.theme !== ActionSheetTheme.Grid) return;\n      this.setData({\n        gridThemeItems: chunk(this.data.items, this.data.count),\n      });\n    },\n\n    /** 指令调用显示 */\n    show(options) {\n      this.setData({\n        ...this.initialData,\n        ...options,\n        visible: true,\n      });\n      this.splitGridThemeActions();\n      this.autoClose = true;\n      this._trigger('visible-change', { visible: true });\n    },\n\n    memoInitialData() {\n      this.initialData = {\n        ...this.properties,\n        ...this.data,\n      };\n    },\n\n    /** 指令调用隐藏 */\n    close() {\n      this._trigger('visible-change', { visible: false });\n    },\n\n    /** 默认点击遮罩关闭 */\n    onPopupVisibleChange({ detail }) {\n      if (!detail.visible) {\n        this._trigger('visible-change', { visible: false });\n      }\n      if (this.autoClose) {\n        this.setData({ visible: false });\n        this.autoClose = false;\n      }\n    },\n\n    onSelect(event: WechatMiniprogram.TouchEvent) {\n      const { currentSwiperIndex, items, gridThemeItems, count, theme } = this.data;\n      const { index } = event.currentTarget.dataset;\n      const isSwiperMode = theme === ActionSheetTheme.Grid;\n      const item = isSwiperMode ? gridThemeItems[currentSwiperIndex][index] : items[index];\n      const realIndex = isSwiperMode ? index + currentSwiperIndex * count : index;\n      if (item) {\n        this.triggerEvent('selected', { selected: item, index: realIndex });\n        this._trigger('visible-change', { visible: false });\n      }\n    },\n\n    onCancel() {\n      this.triggerEvent('cancel');\n    },\n  };\n}\n"]}